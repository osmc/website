!function(e,t){"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):e.jQuery||e.Zepto)}(function(n){var a=this||{},i="",o=0,s=0,r=0,l=".adunit",d=!1,c=!1,u="googleAdUnit",f=function(e,t,s){var l;o=0,r=0,i=e,l=n(t),a.shouldCheckForAdBlockers=function(){return s?"function"==typeof s.afterAdBlocked:!1},E(s,l).then(function(){s=g(s),a.dfpOptions=s,n(function(){p(s,l),h(s,l)})})},g=function(a){var i={setTargeting:{},setCategoryExclusion:"",setLocation:"",enableSingleRequest:!0,collapseEmptyDivs:"original",refreshExisting:!0,disablePublisherConsole:!1,disableInitialLoad:!1,noFetch:!1,namespace:t,sizeMapping:{}};if("undefined"==typeof a.setUrlTargeting||a.setUrlTargeting){var o=m(a.url);n.extend(!0,i.setTargeting,{UrlHost:o.Host,UrlPath:o.Path,UrlQuery:o.Query})}return n.extend(!0,i,a),i.googletag&&e.googletag.cmd.push(function(){n.extend(!0,e.googletag,i.googletag)}),i},p=function(t,s){var l=e.googletag;s.each(function(){var e=n(this);o++;var a=b(e,t),s=v(e,a),r=y(e);e.data("existingContent",e.html()),e.html("").addClass("display-none"),l.cmd.push(function(){var o,d=e.data(u);if(d)o=d;else{var c;c=""===i?a:"/"+i+"/"+a,e.data("outofpage")?o=l.defineOutOfPageSlot(c,s):(o=l.defineSlot(c,r,s),e.data("companion")&&(o=o.addService(l.companionAds()))),o=o.addService(l.pubads())}var f=e.data("targeting");f&&n.each(f,function(e,t){o.setTargeting(e,t)});var g=e.data("exclusions");if(g){var p,h=g.split(",");n.each(h,function(e,t){p=n.trim(t),p.length>0&&o.setCategoryExclusion(p)})}var m=e.data("size-mapping");if(m&&t.sizeMapping[m]){var v=l.sizeMapping();n.each(t.sizeMapping[m],function(e,t){v.addSize(t.browser,t.ad_sizes)}),o.defineSizeMapping(v.build())}e.data(u,o),"function"==typeof t.beforeEachAdLoaded&&t.beforeEachAdLoaded.call(this,e)})}),l.cmd.push(function(){var e=l.pubads();t.enableSingleRequest&&e.enableSingleRequest(),n.each(t.setTargeting,function(t,n){e.setTargeting(t,n)});var i=t.setLocation;if("object"==typeof i&&("number"==typeof i.latitude&&"number"==typeof i.longitude&&"number"==typeof i.precision?e.setLocation(i.latitude,i.longitude,i.precision):"number"==typeof i.latitude&&"number"==typeof i.longitude&&e.setLocation(i.latitude,i.longitude)),t.setCategoryExclusion.length>0){var d,c=t.setCategoryExclusion.split(",");n.each(c,function(t,a){d=n.trim(a),d.length>0&&e.setCategoryExclusion(d)})}t.collapseEmptyDivs&&e.collapseEmptyDivs(),t.disablePublisherConsole&&e.disablePublisherConsole(),t.companionAds&&(l.companionAds().setRefreshUnfilledSlots(!0),t.disableInitialLoad||e.enableVideoAds()),t.disableInitialLoad&&e.disableInitialLoad(),t.noFetch&&e.noFetch(),e.addEventListener("slotRenderEnded",function(e){r++;var a=n("#"+e.slot.getSlotId().getDomId()),i=e.isEmpty?"none":"block",l=a.data("existingContent");"none"===i&&n.trim(l).length>0&&"original"===t.collapseEmptyDivs&&(a.show().html(l),i="block display-original"),a.removeClass("display-none").addClass("display-"+i),"function"==typeof t.afterEachAdLoaded&&t.afterEachAdLoaded.call(this,a,e),"function"==typeof t.afterAllAdsLoaded&&r===o&&t.afterAllAdsLoaded.call(this,s)}),a.shouldCheckForAdBlockers()&&!l._adBlocked_&&setTimeout(function(){var i=e.getSlots?e.getSlots():[];i.length>0&&n.get(i[0].getContentUrl()).always(function(e){200!==e.status&&n.each(i,function(){var e=n("#"+this.getSlotId().getDomId());t.afterAdBlocked.call(a,e,this)})})},0),l.enableServices()})},h=function(t,i){var o=e.googletag;if(a.shouldCheckForAdBlockers()&&!o._adBlocked_&&o.getVersion){var s="//partner.googleadservices.com/gpt/pubads_impl_"+o.getVersion()+".js";n.getScript(s).always(function(e){e&&"error"===e.statusText&&n.each(i,function(){t.afterAdBlocked.call(a,n(this))})})}i.each(function(){var e=n(this),i=e.data(u);o._adBlocked_&&a.shouldCheckForAdBlockers()&&t.afterAdBlocked.call(a,e),o.cmd.push(t.refreshExisting&&i&&e.hasClass("display-block")?function(){o.pubads().refresh([i])}:function(){o.display(e.attr("id"))})})},m=function(t){var n=(t||e.location.toString()).match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/),a=n[4]||"",i=(n[5]||"").replace(/(.)\/$/,"$1"),o=n[7]||"",s=o.replace(/\=/gi,":").split("&");return{Host:a,Path:i,Query:s}},v=function(e,t){return s++,e.attr("id")||e.attr("id",t.replace(/[^A-z0-9]/g,"_")+"-auto-gen-id-"+s).attr("id")},b=function(e,t){var n=e.data("adunit")||t.namespace||e.attr("id")||"";return"function"==typeof t.alterAdUnitName&&(n=t.alterAdUnitName.call(this,n,e)),n},y=function(e){var t=[],a=e.data("dimensions");if(a){var i=a.split(",");n.each(i,function(e,n){var a=n.split("x");t.push([parseInt(a[0],10),parseInt(a[1],10)])})}else t.push([e.width(),e.height()]);return t},E=function(t,i){function o(){a.shouldCheckForAdBlockers()&&n.each(i,function(){t.afterAdBlocked.call(a,n(this))})}if(c=c||n('script[src*="googletagservices.com/tag/js/gpt.js"]').length)return d&&o(),n.Deferred().resolve();var s=n.Deferred();e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[];var r=document.createElement("script");r.async=!0,r.type="text/javascript",r.onerror=function(){A(),s.resolve(),d=!0,o()},r.onload=function(){googletag._loadStarted_||(googletag._adBlocked_=!0,o()),s.resolve()};var l="https:"===document.location.protocol;r.src=(l?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var u=document.getElementsByTagName("script")[0];return u.parentNode.insertBefore(r,u),"none"===r.style.display&&A(),s},A=function(){var t=e.googletag,i=t.cmd,o=function(e,n,a,i){return t.ads.push(a),t.ads[a]={renderEnded:function(){},addService:function(){return this}},t.ads[a]};t={cmd:{push:function(e){e.call(a)}},ads:[],pubads:function(){return this},noFetch:function(){return this},disableInitialLoad:function(){return this},disablePublisherConsole:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(e,t,n){return o(e,t,n,!1)},defineOutOfPageSlot:function(e,t){return o(e,[],t,!0)},display:function(e){return t.ads[e].renderEnded.call(a),this}},n.each(i,function(e,n){t.cmd.push(n)})};n.dfp=n.fn.dfp=function(e,n){n=n||{},e===t&&(e=i),"object"==typeof e&&(n=e,e=n.dfpID||i);var a=this;return"function"==typeof this&&(a=l),f(e,a,n),this}})}(window),Discourse.DiscoveryView=Ember.View.extend({_insertBanner:function(){showAd&&!disable?(this.$(".list-container").prepend("<div class='toplist_ad' data-adunit='discourse_toplist' data-size-mapping='toplist'></div>"),this.$(".toplist_ad").dfp({dfpID:"302320750",sizeMapping:{toplist:[{browser:[1100,0],ad_sizes:[970,90]},{browser:[810,0],ad_sizes:[728,90]},{browser:[530,0],ad_sizes:[468,60]},{browser:[0,0],ad_sizes:[320,50]}]}})):showBanner&&!disable&&(this.$(".list-container").prepend("<a href='"+bannerLink+"'><div class='toplist_banner' style='color:#fafafa; padding:2.5em 1em; margin:0.2em 0;'><h2 style='color:white; font-size:130%; font-weight:300; text-align: center;'>"+bannerText+"</h2></div></a>"),this.$(".toplist_banner").css({background:"url("+bannerImg+")"}))}.on("didInsertElement"),_insertDonateButton:function(){this.$(".list-controls .container").before('<a target="_blank" href="https://osmc.tv/blog/#donate"><button class="btn btn-default donate-button"><i class="fa fa-heart"></i>Donate</button></a>')}.on("didInsertElement")}),autoLinks.forEach(function(e){var t=new RegExp(e[0]);Discourse.Dialect.inlineRegexp({start:e[0],matcher:t,spaceBoundary:!0,emitter:function(){setTimeout(function(){var t=$("textarea.ember-text-area"),n=t.val().replace(e[0],e[1]);t.val(n)},500)}})});